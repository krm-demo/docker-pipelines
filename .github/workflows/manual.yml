name: 'Manual Build & Push'
on: workflow_dispatch
jobs:
  hello-sh:
    runs-on: ubuntu-latest
    steps:
    - name: checkout the latest changes
      uses: actions/checkout@v4
    - name: install buildx
      id: buildx
      uses: docker/setup-buildx-action@v3
    - name: invoke 'buildx-image.sh'
      env:
        DEPLOYMENT_NAME: hello-sh 
        DOCKER_USERNAME: ${{ vars.DOCKER_USERNAME }}
        DOCKER_PASSWORD: ${{ vars.DOCKER_PASSWORD }}
      run: |
        echo "DOCKER_USERNAME = '$DOCKER_USERNAME'"
        echo "DOCKER_PASSWORD = '$DOCKER_PASSWORD'"
        echo "env.DOCKER_USERNAME = '${{ env.DOCKER_USERNAME }}"
        echo "secrets.DOCKER_PASSWORD = '${{ secrets.DOCKER_PASSWORD }}"
        ./buildx-image.sh
    - name: some markdown with summary
      env:
        GH_BRANCH_NAME: ${{ github.head_ref || github.ref_name }} 
        GH_BUILD_NUMBER: ${{ github.run_number }}
      run: |
        echo "Some results in branch ${GH_BRANCH_NAME}(${GH_BUILD_NUMBER})" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY # this is a blank line
        echo "- Lets add a bullet point" >> $GITHUB_STEP_SUMMARY
        echo "- Lets add a second bullet point" >> $GITHUB_STEP_SUMMARY
        echo "- How about a third one?" >> $GITHUB_STEP_SUMMARY
